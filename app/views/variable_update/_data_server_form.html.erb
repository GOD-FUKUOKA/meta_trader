<% unless @data_server.nil? %>
  <div class="section section-data_server">
    <h2 class="normal blue"><i class="icon-tasks"></i> Data Server
    <%= link_to glyph(:plus) + " New", "#modal-data-server", :id => "new_data_server", :class =>"btn btn-primary pull-right" %></h2>
      <!-- This button need to be replaced with button above. -->
<!--a href="#modal-data-server" role="button" class="btn btn-primary pull-right" data-toggle="modal"><i class="icon-plus"></i> New</a-->
  <table class="data_server_table table hover-table data-server-table">
    <thead>
    <tr>
      <th>Server</th>
      <th>Description</th>
      <th>Internal IP Address</th>
      <th>Priority</th>
      <th>Loading</th>
      <th></th>
    </tr>
    </thead>
    <% @data_server.each_with_index do |row, ix| %>
      <%= render "variable_update/data_server_row", :row => row, :ix => ix %>
    <% end %>
  </table>




  <!-- Modal Data-Server -->
  <div id="modal-data-server" class="modal hide in modal-form modal-data-server" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="myModalLabel" class="normal"><i class="icon-tasks"></i> Data Server</h3>
      </div>
      <div class="modal-body">
    <%= form_tag data_server_submit_path, :class =>"form-horizontal form-bordered form-data-server border", :method => "POST", :remote => true, :id => "form-data-server-modal" do %>
      <%= hidden_field_tag "data_server_new_record", true %>
      <%= hidden_field_tag "data_server_tab[position]", @data_server.count %>

      <div class="control-group">
      <label for="data_server_tab[description]" class="control-label">Description: </label>
      <div class="controls">
        <div  class="input-xlarge">
       <%= text_field_tag "data_server_tab[description]", nil, :class =>"single-line" %>
        </div>
      </div>
      </div><!--/control-group-->

      <div class="control-group">
      <label for="data_server_tab[server]" class="control-label">Public server address: </label>
      <div class="controls">
      <%= text_field_tag "data_server_tab[server]", nil, :class =>"single-line" %>
      </div>
      </div><!--/control-group-->

      <div class="control-group">
      <label for="data_server_tab[ip_internal]" class="control-label">Internal IP Address: </label>
      <div class="controls">
      <%= text_field_tag "data_server_tab[ip_internal]", nil, :class =>"single-line"  %>
      </div>
      </div><!--/control-group-->

      <div class="control-group">
      <label for="data_server_tab[priority]" class="control-label">Priority: </label>
      <div class="controls">
      <div  class="input-xlarge">
          <%= select_tag "data_server_tab[priority]", options_for_data_server_priority, :class =>"single-line chosen-select" %>
        </div>
      </div>
      </div><!--/control-group-->
        <div class="form-actions">
      <%= submit_tag"Submit", :class => "btn btn-primary" %>
      </div><!--/form-actions-->
    <% end %>
      </div>

    </div><!--/modal-data-server-->
  </div>
<% end %>
